---
import TaskEditor from "../../components/solid/TaskEditor";
import PageLayout from "../../layouts/PageLayout.astro";
import { getActiveUserTags } from "../../server/tags";

const user = Astro.locals.user;
if (!user)
  return new Response(null, { status: 401, statusText: "Unauthorized" });


const user_tags = await getActiveUserTags(user.id);
---

<PageLayout title={"New Task - devpad"}>
  <main>
    <TaskEditor
      task={null}
      codebase_tasks={null}
      tags={[]}
      user_tags={user_tags}
	  current_tags={[]}
      history={[]}
      user_id={user.id}
	  client:load
    />
  </main>
</PageLayout>
