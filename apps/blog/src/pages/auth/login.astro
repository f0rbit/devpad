---
const DEVPAD_API = import.meta.env.PUBLIC_DEVPAD_API ?? "https://devpad.tools";
const origin = Astro.url.origin;
const isPreview = !origin.includes("devpad.tools");

const params = new URLSearchParams({
	return_to: `${origin}/auth/callback`,
	...(isPreview && { mode: "jwt" }),
});

return Astro.redirect(`${DEVPAD_API}/api/auth/login?${params}`);
---
