---
import { getServerApiClient } from "@/utils/api-client";
import PageLayout from '@/layouts/PageLayout.astro';
import { TagEditor } from '@/components/solid/TagEditor';

const user = Astro.locals.user;
if (!user) return new Response(null, { status: 401 });

let tags = [];
try {
	const apiClient = getServerApiClient(Astro.locals);
	tags = await apiClient.tags.list();
} catch (error) {
	console.error("Error fetching user tags:", error);
	tags = [];
}
---

<PageLayout title="Tags - devpad">
	<main>
		<section>
			<h5>tags</h5>
			<br />
			<TagEditor client:load tags={tags} owner_id={user.id} />
		</section>
	</main>
</PageLayout>
